<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta HTTP-EQUIV="Cache-Control" CONTENT="only-if-cached">
	<title>快乐早点</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
	<link rel="stylesheet" href="css/base.css">
	<style>
		html,body{height:100%;}
	</style>
</head>
<body>
<header>
	<a href="javascript:history.back(-1);"></a>
	<p>店铺位置</p>
</header>
<div id="map" style="widt:100%;height:100%;"></div>
<script type="text/javascript">

    var latitude = GetQueryString("latitude");
    var longitude = GetQueryString("longitude");
    if(!(latitude && longitude)){
        var mapAddress = JSON.parse(sessionStorage.getItem('sessionShopInfo'));
	    latitude = mapAddress.latitude * 1;
	    longitude = mapAddress.longitude * 1;
    }

	function initialize() {
		var map = new BMap.Map("map");
		var point = new BMap.Point(longitude,latitude);
		map.centerAndZoom(point, 15);
		// 创建图标对象
		var myIcon = new BMap.Icon(" http://api.map.baidu.com/images/marker_red_sprite.png ", new BMap.Size(23, 25), {
			offset: new BMap.Size(10, 25)
		});
		// 创建标注对象并添加到地图
		var marker = new BMap.Marker(point, {icon: myIcon});
		map.addOverlay(marker);

	}
	function loadScript() {
		var script = document.createElement("script");
		script.src = "http://api.map.baidu.com/api?v=2.0&ak=SVqdGOSv5piYMGvqSn91FyIMTEWGQxTN&callback=initialize";
		document.body.appendChild(script);
	}

	window.onload = loadScript;

	//取url参数
	function GetQueryString(name)
	{
		var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
		var r = window.location.search.substr(1).match(reg);
		if(r!=null)return  unescape(r[2]); return null;
	}
</script>
</body>
</html>