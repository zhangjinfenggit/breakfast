<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>消费历史</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="css/base.css">
    <script src="js/jquery.js"></script>
    <script src="js/js.js"></script>
    <script src="js/buy_record.js"></script>
</head>
<body>
<ul id="orderList" class="buy_list ">
    <li>
        <h2>订单完成</h2>
        <p>店铺: <span>珊瑚包子铺</span></p>
        <p>订单号: <span>2541235415633</span></p>
        <p>早餐:</p>
        <ul>
            <li>漏包x1</li>
            <li>菜包x1</li>
        </ul>
        <u></u>
        <i>消费金额 : ¥5</i>
    </li>
    <li>
        <h2 class="return">订单已退</h2>

        <p>店铺: <span>珊瑚包子铺</span></p>

        <p>订单号: <span>2541235415633</span></p>

        <p>早餐:</p>
        <ul>
            <li>漏包x1</li>
            <li>菜包x1</li>
        </ul>
        <u></u>
        <i>消费金额 : ¥5</i>
    </li>
</ul>
<script>
$(function () {
    var phone = sessionStorage.getItem('phone');
    $.ajax({
        type:'post',
        url:'http://ip:port/breakfastApi/weixin/queryOrderHistory',
        data:{"phone":phone,"weixintoken":"header"},
        dataType:'json',
        success:function(result){
            if(result.retCode){
                var list = result.data;
                var str = '';
                for(var i=0;i<list.length;i++){
                    var str2 = '';
                    var orderDetailList = list[i].orderDetail;
                    for(var key in orderDetailList){
                        str2 += '<li>'+key+'x'+orderDetailList[key]+'</li>';
                    }
                    str += '\
                    <li>\
                        <h2>'+list[i].orderStatus+'</h2>\
                        <p>店铺: <span>'+list[i].shopName+'</span></p>\
                        <p>订单号: <span>'+list[i].orderNo+'</span></p>\
                        <p>早餐:</p>\
                        <ul>'+str2+'</ul>\
                        <u></u>\
                        <i>消费金额 : ¥'+list[i].totalMoney+'</i>\
                    </li>'
                }
                $('#orderList').empty().append(str);
            }else{
                setTimeoutAlert(result.retMsg);
            }

        }
    })
})

    var list = {
        singeList:[
            {id1:"1","singleName":"包子","anmout":"1","money":"2"},
            {id1:"2","singleName":"包子3","anmout":"1","money":"2"}
        ],
        packageList:[
            {id1:"1","singleName":"套餐1","anmout":"1","money":"2"},
            {id1:"2","singleName":"套餐2","anmout":"1","money":"2"}
        ],
    }
</script>
</body>
</html>